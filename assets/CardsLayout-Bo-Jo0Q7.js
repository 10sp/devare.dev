import{k as e,R as M,r as f}from"./core-Dg4AQqgP.js";import{u as v,h as w,$ as O,aP as N,aQ as T,aR as I,a3 as V,aS as _,aT as K}from"./index-CR7iXtCZ.js";import{s as W,v as z,z as F,K as H,A as q,c as k,D as Q,w as U,B as $,q as G,C as X}from"./ui-BCbqmSXn.js";import"./utils-272-bJLf.js";import{a as J,b as Y,C as A}from"./index-B8Mb9fpQ.js";import"./CardIcon-Boowplx0.js";try{let s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},o=new s.Error().stack;o&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[o]="212c0f79-9303-45c7-917e-d9583049b407",s._sentryDebugIdIdentifier="sentry-dbid-212c0f79-9303-45c7-917e-d9583049b407")}catch{}const Z=({selectedCard:s,setSelectedCard:o})=>{const{cards:n,userCustomCards:m}=v(),d=[...w,...m];return e.jsx("div",{className:"bottomNavigation",children:n.map(r=>{const a=d.find(u=>u.value===r.name);return e.jsx("button",{className:"navigationItem "+(s&&s.name===r.name?"active":""),onClick:()=>o(r),children:M.isValidElement(a==null?void 0:a.icon)?a.icon:typeof(a==null?void 0:a.icon)=="string"?e.jsx("img",{src:a.icon,alt:""}):e.jsx(O,{className:"rss"})},r.name)})})},ee=()=>{const{cards:s}=v(),[o,n]=f.useState(!1),[m,d]=f.useState(!1),r=f.useRef(null),a="Cards",u=i=>{const g=i.target;if(g.classList.contains(a))if(s.length<=N)n(!1),d(!1);else{const{scrollLeft:C,scrollWidth:y,offsetWidth:p}=g;n(C>100);const t=y-p-Math.abs(C);d(t>100)}},b=f.useCallback(i=>{i.key==="ArrowLeft"?h("left"):i.key==="ArrowRight"&&h("right")},[]);f.useLayoutEffect(()=>{r.current=document.querySelector(`.${a}`)},[]),f.useEffect(()=>{var i;return(i=r.current)==null||i.addEventListener("scroll",u,!0),window.addEventListener("keydown",b),()=>{var g;window.removeEventListener("keydown",b),(g=r.current)==null||g.removeEventListener("scroll",u)}},[b]),f.useEffect(()=>{d(s.length>N)},[s]);const h=i=>{var p,t;if(!r.current)return;T(i);const{scrollLeft:g}=r.current,{offsetWidth:C}=(t=(p=r.current)==null?void 0:p.firstChild)==null?void 0:t.firstChild,y=i==="left"?g-C:g+C;r.current.scrollTo({left:y,behavior:"smooth"})};return e.jsxs("div",{className:"scrollCardsNavigator",children:[o&&e.jsx("button",{"aria-label":"Previous cards",className:"scrollButton",onClick:()=>h("left"),style:{left:0},children:e.jsx(J,{size:32})}),m&&e.jsx("button",{"aria-label":"Next cards",className:"scrollButton",onClick:()=>h("right"),style:{right:0},children:e.jsx(Y,{size:32})})]})},P=({children:s})=>I({minWidth:768})?s:null,se=({children:s})=>I({maxWidth:767})?s:null,te=({id:s,card:o})=>{const{attributes:n,listeners:m,setNodeRef:d,isDragging:r,transform:a,transition:u}=G({id:s}),{isOrganizeMode:b}=v(),h={transform:X.Transform.toString(a),transition:u},i=o.component||A;return e.jsx("div",{ref:d,style:h,className:k(b&&"grid-item"),children:e.jsx(i,{meta:o,className:k(r&&"draggedBlock",b&&"organize-item"),knob:e.jsx(P,{children:e.jsx("button",{className:"blockHeaderDragButton",...n,...m,children:e.jsx(K,{})})})})})},ne=({cards:s,userCustomCards:o})=>{const n=[...w,...o],{updateCardOrder:m,isOrganizeMode:d,setIsOrganizeMode:r,setCards:a}=v(),u=f.useRef(null),{adsConfig:b}=V(),h=W(z(q),z(H,{coordinateGetter:F})),i=()=>{var t;(t=u.current)==null||t.classList.add("snapDisabled")},g=t=>{var S;const{active:c,over:l}=t;if(c.id!==(l==null?void 0:l.id)){const j=s.findIndex(x=>x.name===c.id),D=s.findIndex(x=>x.name===(l==null?void 0:l.id));j!==-1&&D!==-1&&(m(j,D),_())}(S=u.current)==null||S.classList.remove("snapDisabled")},C=t=>{if(!u.current)return;const c=u.current,{clientX:l}=t,{left:S,right:j,width:D}=c.getBoundingClientRect(),x=D*.1,L=S+x,R=j-x,B=10;if(l<L){const E=(L-l)/x;c.scrollBy({left:-B*E,behavior:"smooth"})}else if(l>R){const E=(l-R)/x;c.scrollBy({left:B*E,behavior:"smooth"})}},y=f.useMemo(()=>s.map(t=>{const c=n.find(l=>l.value===t.name);return c?{card:c,id:t.name}:null}).filter(Boolean),[s]);f.useEffect(()=>{const t=c=>{c.key==="Escape"&&d&&(r(!1),document.documentElement.classList.remove("organizeMode"))};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[d,r]);const p=()=>{r(!1),document.documentElement.classList.remove("organizeMode")};return e.jsxs("div",{ref:u,className:k("Cards","HorizontalScroll",d&&"grid-layout"),children:[d&&e.jsxs("div",{className:"organize-mode-header",children:[e.jsx("h2",{children:"Organize Cards"}),e.jsx("p",{children:"Drag and drop cards to reorder them. Press ESC to exit."}),e.jsx("button",{className:"exit-organize-mode",onClick:p,children:"Exit Organize Mode"})]}),e.jsx(Q,{sensors:h,autoScroll:!0,onDragEnd:g,onDragStart:i,onDragMove:C,children:e.jsx(U,{items:y.map(({id:t})=>t),strategy:$,children:y.map(({id:t,card:c},l)=>e.jsx(te,{id:t,card:c},t))})})]})},re=({selectedCard:s})=>{const{userCustomCards:o}=v(),n=[...w,...o].find(m=>m.value===s.name);return n?M.createElement((n==null?void 0:n.component)||A,{key:n.value,meta:n}):null},ue=()=>{const{cards:s,userCustomCards:o}=v(),[n,m]=f.useState(s[0]);return e.jsxs(e.Fragment,{children:[e.jsx(ee,{}),e.jsx(P,{children:e.jsx(ne,{cards:s,userCustomCards:o})}),e.jsx(se,{children:e.jsx("div",{className:"Cards HorizontalScroll",children:e.jsx(re,{selectedCard:n})})}),e.jsx(Z,{selectedCard:n,setSelectedCard:m})]})};export{ue as CardsLayout};
//# sourceMappingURL=CardsLayout-Bo-Jo0Q7.js.map
