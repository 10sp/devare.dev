import{k as e,r as x,g as Ne,m as ke,n as ye,i as ce}from"./core-Dpo8Q2SY.js";import{M as ne,b as F,g as we,t as V,c as De,d as Re,r as re,e as Ee,p as Ae,f as de,u as T,h as se,j as W,C as Ie,k as Fe,m as Te,n as Le,o as Me,q as te,v as Ue,w as $e,F as Be,x as Pe,y as Oe,I as Ve,z as ze,D as _e,E as He,G as ue,J as me,K as Ge,L as Ye,N as Je,O as We,P as qe,Q as Ke,R as Qe,T as Xe,A as he,U as Ze,V as es,W as ss,H as ts,X as pe,Y as ns,Z as as,$ as ls,a0 as rs,a1 as os,a2 as is,a3 as cs,a4 as ds}from"./index-CcP7eB5b.js";import{R as us,a as ms,b as hs,C as K,c as ps}from"./ChipsSet-B_sxAjzQ.js";import{t as q,n as fs,S as fe,G as gs,o as ge}from"./ui-CRwGqcgo.js";import"./DNDLayout-DlpCNYJw.js";import"./utils-B4k-6dfN.js";import{C as oe}from"./CustomContentRssCard-D94Wsk2m.js";import{g as xe}from"./CardIcon-DLOjbbbt.js";try{let s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},r=new s.Error().stack;r&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[r]="28b237ef-4fcb-4c9d-920d-415414e0a3cc",s._sentryDebugIdIdentifier="sentry-dbid-28b237ef-4fcb-4c9d-920d-415414e0a3cc")}catch{}const Q=({showModal:s,title:r,description:n,onClose:l,onConfirm:t})=>e.jsx(ne,{showModal:s,onClose:l,header:{title:r,className:void 0,icon:void 0},className:"confirmModal",children:e.jsxs("div",{className:"content",children:[e.jsx("p",{className:"description",children:n}),e.jsxs("div",{className:"buttons",children:[e.jsx(F,{onClick:l,size:"medium",children:"Cancel"}),e.jsx(F,{onClick:t,size:"medium",children:"Confirm"})]})]})}),xs=()=>{const s=we();return e.jsxs("footer",{className:"AppFooter",children:[e.jsxs("a",{className:"linkItem",href:De,onClick:()=>V("Feature Request"),children:[e.jsx(Re,{className:"linkItemIcon"})," New Feature?"]}),e.jsxs("a",{className:"linkItem",href:re,target:"_blank",onClick:()=>V("Source Code"),rel:"noreferrer",children:[e.jsx(us,{className:"linkItemIcon"})," Source code"]}),e.jsx("a",{className:"linkItem",href:Ee,onClick:()=>V("Terms And Conditions"),children:"Terms & conditions"}),e.jsx("a",{className:"linkItem",href:Ae,onClick:()=>V("Privacy Policy"),children:"Privacy policy"}),s&&e.jsxs("a",{className:"linkItem",href:re,target:"_blank",rel:"noreferrer",onClick:()=>V("Source Code"),children:["v",s]})]})},z=({title:s,description:r,actions:n,children:l})=>e.jsxs("div",{className:"settingsContent",children:[e.jsxs("header",{children:[e.jsxs("div",{className:"settingsHeader",children:[e.jsx("h1",{className:"title",children:s}),e.jsx("p",{className:"description",children:r})]}),n&&e.jsx("div",{className:"actions",children:n})]}),e.jsx("main",{className:"settingsBody scrollable",children:l})]}),js=({item:s,appendRef:r=!1})=>{const{unbookmarkPost:n}=de(),{userCustomCards:l}=T(),o=[...se,...l].find(d=>d.value===s.source),i={[W.TRIGERED_FROM]:"bookmarks",[W.TITLE]:s.title,[W.LINK]:s.url,[W.SOURCE]:s.source},c=()=>{n(s),Le(i),q("Link removed from the bookmarks",{theme:"defaultToast"})};return e.jsxs("div",{className:"bookmarkItem",children:[e.jsxs(Ie,{className:"body",link:s.url,appendRef:r,analyticsAttributes:i,children:[e.jsx("div",{className:"title",children:s.title}),o&&e.jsxs("div",{className:"source",children:[o.type==="supported"?e.jsx("span",{className:"icon",children:o.icon}):e.jsx("img",{className:"icon",src:o.icon,alt:""}),e.jsx("span",{children:o.label})]})]}),e.jsx("div",{className:"actions",children:e.jsx("button",{className:"btn","aria-label":"Remove from bookmarks",onClick:c,children:e.jsx(Fe,{})})})]})},Ys=()=>{const s=x.useRef(null),{initState:r,userBookmarks:n}=de(),l=()=>{var i;(i=s.current)==null||i.click()},t=()=>{const i=new Blob([JSON.stringify(n,null,2)],{type:"application/json"}),c=URL.createObjectURL(i),d=document.createElement("a");d.href=c,d.download="devareBookmarks",d.click()},o=i=>{var d;const c=(d=i.target.files)==null?void 0:d[0];if(c){const u=new FileReader;u.onload=()=>{const h=JSON.parse(u.result).filter(p=>p.title&&p.url&&!n.some(v=>v.title===p.title&&v.url===p.url)).map(p=>({title:p.title,url:p.url,source:p.source||"",sourceType:p.sourceType||""}));r({userBookmarks:[...n,...h]}),q("Your bookmarks have been successfully imported",{theme:"defaultToast"})},u.readAsText(c)}};return e.jsx(e.Fragment,{children:e.jsx(z,{title:"Bookmarks",description:"Find all your bookmarks here. You can remove a bookmark by clicking on the remove icon.",actions:e.jsxs("div",{className:"buttonsFlex",children:[e.jsx("input",{type:"file",id:"file",ref:s,accept:"application/json",className:"hidden",onChange:o}),e.jsxs(F,{onClick:l,children:[e.jsx(ms,{}),"Import"]}),e.jsx(Te,{onClick:()=>t(),children:e.jsx(hs,{})})]}),children:e.jsx("div",{className:"bookmarks",children:n.map(i=>e.jsx(js,{item:i},i.url))})})})};var vs=fs();const Z=Ne(vs),Ss=({userId:s})=>Me.delete(`/engine/user/${s}`,{}),Cs=({config:s}={})=>ke({...s,mutationFn:Ss}),bs=()=>{const s=Cs(),{user:r,logout:n}=te(),[l,t]=x.useState(!1);if(!r)return null;const o=()=>{s.mutateAsync({userId:r.id}).then(()=>{n(),Ue(),q("Account deleted successfully",{theme:"successToast"})}).catch(()=>{q("Failed to delete account",{theme:"defaultToast"})})};return e.jsxs("div",{className:"settingRow",children:[e.jsxs("p",{className:"settingTitle",children:["Delete account?",e.jsx("br",{}),e.jsx("span",{className:"settingHint",children:"This action is irreversible and will delete all your data. Proceed with caution."})]}),e.jsxs("div",{className:"settingContent",children:[e.jsx(Q,{showModal:l,title:"Confirm delete account",description:"Are you sure you want to delete your account? This action is irreversible and will delete all your data including your streaks and settings.",onClose:()=>t(!1),onConfirm:o}),e.jsx(F,{size:"small",onClick:()=>t(!0),isLoading:s.isLoading,children:"Delete account"})]})]})},Ns=(s,r,n="s")=>`${s} ${r}${s!==1?n:""}`,ks=()=>{const{user:s}=te(),{logout:r,providerId:n,openAuthModal:l}=te(),t=(n==null?void 0:n.split(".")[0])||"Unknown",[o,i]=x.useState(!1);return s?e.jsxs("div",{className:"userContent",children:[e.jsx(Q,{showModal:o,title:"Confirm logout",description:"Are you sure you want to logout?",onClose:()=>i(!1),onConfirm:r}),e.jsxs("div",{className:"userDetails",children:[(s==null?void 0:s.imageURL)&&e.jsx("img",{src:s.imageURL,className:"userImage"}),e.jsxs("div",{className:"userInfo",children:[e.jsx("div",{className:"userName",children:s.name}),e.jsxs("div",{className:"sub",children:[n=="github.com"?e.jsx(Be,{size:18}):n=="google.com"?e.jsx(Pe,{size:18}):null,"Connected with ",e.jsx("span",{className:"capitalize",children:t})]}),e.jsx("div",{className:"actions",children:e.jsx(F,{className:"logoutBtn",onClick:()=>i(!0),size:"small",children:"Logout"})})]})]}),e.jsxs("div",{className:"streaks",children:[e.jsxs("p",{className:"title",children:["You're on"," ",e.jsxs("span",{className:"highlight",children:[e.jsx(Oe,{className:"icon"})," ",Ns(s.streak||1,"day")," streak"]})]}),e.jsx("div",{children:e.jsx("ul",{className:"streaksWeek",children:Array.from({length:5},(c,d)=>{const u=s.streak||1;return d<u?e.jsx("li",{className:"dayWrapper checked",children:e.jsx("span",{className:"day",children:e.jsx(Ve,{})})},`day-${d}`):e.jsx("li",{className:"dayWrapper",children:e.jsx("span",{className:"day"})},`day-${d}`)})})})]})]}):e.jsx("div",{className:"userContent",children:e.jsxs("div",{className:"userDetails",children:[e.jsx($e,{className:"userImage"}),e.jsxs("div",{className:"userInfo",children:[e.jsxs("div",{className:"userName",children:["Join ",e.jsx("b",{children:"Hackertab"})]}),e.jsxs("div",{className:"description",children:["Create a free account on ",e.jsx("b",{children:"Hackertab"})," to sync, save bookmarks, and earn rewards."]}),e.jsx("div",{className:"actions",children:e.jsx(F,{className:"logoutBtn",onClick:()=>l(),size:"small",children:"Connect"})})]})]})})},ys=()=>{const{maxVisibleCards:s,setMaxVisibleCards:r,layout:n}=T(),l=t=>{if(t.length){const o=parseInt(t[0].value);r(o),ze(o),_e(o)}};return n==="grid"?null:e.jsxs("div",{className:"settingRow",children:[e.jsx("p",{className:"settingTitle",children:"Max number of cards to display"}),e.jsxs("div",{className:"settingContent",children:[e.jsx(K,{className:"noMargin alternative-color",canSelectMultiple:!1,options:[{label:"3 cards",value:"3"},{label:"4 cards",value:"4"},{label:"5 cards",value:"5"},{label:"6 cards",value:"6"}],defaultValues:[s.toString()],onChange:(t,o)=>{l(o)}}),e.jsx("p",{className:"settingHint",children:"To ensure a seamless experience, we may adjust the selected number to align with the resolution of your screen."})]})]})},ws=(s,r)=>Math.floor((s-r)/(1e3*60)),ee=[{value:15,label:"For 15 minutes"},{value:30,label:"For 30 minutes"},{value:60,label:"For 1 hour"},{value:"always",label:"Until you turn it off"}],Ds=()=>{const[s,r]=x.useState(),n=ye(),{DNDDuration:l,setDNDDuration:t}=T(),o=()=>{if(s){if(typeof s=="string")t(s);else{const u=s,j=new Date;j.setMinutes(j.getMinutes()+u),t({value:s,countdown:j.getTime()})}He(s),n("/")}},i=u=>{u&&r(u.value)},c=()=>{if(typeof l=="string")return ee.find(u=>u.value===l);if(typeof l=="object"){const u=l;return ee.find(j=>j.value===u.value)}},d=()=>{if(typeof l=="object"){const u=l,j=new Date(u.countdown),h=new Date;return`DND will turn off in ${ws(j.getTime(),h.getTime())} Minutes`}};return e.jsxs("div",{className:"settingRow",children:[e.jsxs("p",{className:"settingTitle",children:["Do not disturb",e.jsx("br",{}),e.jsx("span",{className:"settingHint",children:"Pause Hackertab for a period of time"})]}),e.jsxs("div",{className:"settingContent",children:[e.jsxs("div",{className:"form",children:[e.jsx("div",{style:{flex:1},children:e.jsx(fe,{options:ee,placeholder:"For x minutes",isMulti:!1,isClearable:!1,isSearchable:!1,defaultValue:c(),classNamePrefix:"devare",onChange:i})}),e.jsx(F,{size:"small",onClick:o,children:"Apply"})]}),d()&&e.jsx("div",{className:"settingHint",children:e.jsx("p",{children:d()})})]})]})},Rs=()=>{const{userSelectedTags:s,layout:r,theme:n,openLinksNewTab:l,listingMode:t,promptEngine:o,promptEngines:i,maxVisibleCards:c,cards:d,cardsSettings:u,userCustomCards:j,DNDDuration:h,onboardingCompleted:p,onboardingResult:v,firstSeenDate:C,isOrganizeMode:L,setTags:I,setLayout:B,setTheme:U,setOpenLinksNewTab:f,setListingMode:k,setPromptEngine:g,setMaxVisibleCards:w,setCards:a,setUserCustomCards:y,setDNDDuration:b,addSearchEngine:A,removeSearchEngine:m,setOnboardingCompleted:D,setFirstSeenDate:R,setIsOrganizeMode:E}=T(),[N,M]=x.useState(null),[P,_]=x.useState(null),ae=x.useRef(null),Se=()=>{try{const H=JSON.stringify({layout:r,theme:n,openLinksNewTab:l,listingMode:t,maxVisibleCards:c,DNDDuration:h,isOrganizeMode:L,cards:d,userCustomCards:j,userSelectedTags:s,promptEngine:o,promptEngines:i,cardsSettings:u,onboardingCompleted:p,onboardingResult:v,firstSeenDate:C},null,2),G="data:application/json;charset=utf-8,"+encodeURIComponent(H),Y=`devare-full-settings-${new Date().toISOString().slice(0,10)}.json`,O=document.createElement("a");O.setAttribute("href",G),O.setAttribute("download",Y),O.click(),_("All settings exported successfully!"),setTimeout(()=>_(null),3e3)}catch($){_("Error exporting settings: "+$.message),setTimeout(()=>_(null),5e3)}},Ce=$=>{var Y;const H=(Y=$.target.files)==null?void 0:Y[0];if(!H)return;const G=new FileReader;G.onload=O=>{var le;try{const X=(le=O.target)==null?void 0:le.result,S=JSON.parse(X);S.layout&&B(S.layout),S.theme&&U(S.theme),typeof S.openLinksNewTab=="boolean"&&f(S.openLinksNewTab),S.listingMode&&k(S.listingMode),typeof S.maxVisibleCards=="number"&&w(S.maxVisibleCards),S.DNDDuration&&b(S.DNDDuration),typeof S.isOrganizeMode=="boolean"&&E(S.isOrganizeMode),S.cards&&a(S.cards),S.userCustomCards&&y(S.userCustomCards),S.userSelectedTags&&I(S.userSelectedTags),S.promptEngines&&(i.forEach(J=>{m(J.url)}),S.promptEngines.forEach(J=>{A(J)})),S.promptEngine&&g(S.promptEngine),typeof S.onboardingCompleted=="boolean"&&D(S.onboardingCompleted),S.firstSeenDate&&R(S.firstSeenDate),S.cardsSettings&&Object.keys(S.cardsSettings).forEach(J=>{}),M("All settings imported successfully!"),setTimeout(()=>M(null),3e3)}catch(X){M("Error importing settings: "+X.message),setTimeout(()=>M(null),5e3)}},G.readAsText(H),$.target.value=""},be=()=>{var $;($=ae.current)==null||$.click()};return e.jsxs("div",{className:"settingRow",children:[e.jsx("p",{className:"settingTitle",children:"Import/Export All Settings"}),e.jsxs("div",{className:"settingContent",children:[e.jsxs("div",{className:"import-export-buttons",children:[e.jsx("input",{type:"file",accept:".json",onChange:Ce,style:{display:"none"},ref:ae,id:"import-settings-input"}),e.jsx(F,{startIcon:e.jsx(ue,{}),onClick:be,children:"Import Settings"}),e.jsx(F,{startIcon:e.jsx(me,{}),onClick:Se,children:"Export Settings"})]}),(N||P)&&e.jsx("div",{className:"settingHint",children:e.jsx("p",{children:N||P})})]})]})};function Es(s){return gs({attr:{version:"1.1",viewBox:"0 0 17 17"},child:[{tag:"g",attr:{},child:[]},{tag:"path",attr:{d:"M1 0h3v17h-3v-17zM5 17h3v-17h-3v17zM9 17h3v-17h-3v17zM13 0v17h3v-17h-3z"},child:[]}]})(s)}const ie=[{value:"grid",label:"AI Feed (Beta)",icon:e.jsx(ps,{color:"#F1D247"})},{value:"cards",label:"Cards",icon:e.jsx(Es,{})}],As=s=>e.jsx(ge.Option,{...s,children:e.jsxs("div",{className:"optionIcon",children:[s.data.icon,s.data.label]})}),Is=s=>e.jsx(ge.SingleValue,{...s,children:e.jsxs("div",{className:"optionIcon",children:[s.data.icon,s.data.label]})}),Fs=()=>{const{layout:s,setLayout:r}=T(),n=t=>{t&&(r(t.value),Ge(t.value),Ye(t.value))},l=()=>ie.find(t=>t.value===s);return e.jsxs("div",{className:"settingRow",children:[e.jsx("p",{className:"settingTitle",children:"Layout Style"}),e.jsx("div",{className:"settingContent",children:e.jsx("div",{className:"form",children:e.jsx("div",{style:{flex:1},children:e.jsx(fe,{options:ie,components:{Option:As,SingleValue:Is},isMulti:!1,isClearable:!1,isSearchable:!1,defaultValue:l(),classNamePrefix:"devare",onChange:n})})})})]})},Js=()=>{const{openLinksNewTab:s,listingMode:r,theme:n,maxVisibleCards:l,setTheme:t,setListingMode:o,setMaxVisibleCards:i,setOpenLinksNewTab:c}=T(),d=h=>{const p=h.target.checked;qe(p),Ke(p),c(p)},u=h=>{const p=h.target.checked?"compact":"normal";Qe(p),Xe(p),o(p)},j=()=>{const h=n==="dark"?"light":"dark";t(h),Je(h),We(h)};return e.jsx(z,{title:"General Settings",description:"Customize your experience by selecting the number of cards you want to see, the search engine you want to use and more.",children:e.jsxs("div",{children:[e.jsx(ks,{}),e.jsx(Fs,{}),e.jsx(ys,{}),e.jsxs("div",{className:"settingRow",children:[e.jsx("p",{className:"settingTitle",children:"Dark Mode"}),e.jsx("div",{className:"settingContent",children:e.jsx(Z,{checked:n==="dark",icons:!1,onChange:j})})]}),e.jsxs("div",{className:"settingRow",children:[e.jsx("p",{className:"settingTitle",children:"Open links in a new tab"}),e.jsx("div",{className:"settingContent",children:e.jsx(Z,{checked:s,icons:!1,onChange:d})})]}),e.jsxs("div",{className:"settingRow",children:[e.jsx("p",{className:"settingTitle",children:"Compact mode"}),e.jsx("div",{className:"settingContent",children:e.jsx(Z,{checked:r==="compact",icons:!1,onChange:u})})]}),e.jsx(Ds,{}),e.jsx(Rs,{}),e.jsx(bs,{}),e.jsx(xs,{})]})})},je=s=>{var r=new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,})(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");return!!r.test(s)},Ts=()=>{const{addSearchEngine:s,promptEngines:r}=T(),[n,l]=x.useState(),[t,o]=x.useState(),i=[...he,...r],c=async()=>{if(!n){o("Please provide a valid Prompt engine URL");return}if(!je(n)){o("Invalid AI prompt Engine URL. Please check and try again");return}if(i.some(j=>j.url===n)){o("AI Prompt Engine already exists");return}const u=new URL(n).hostname.replace("www.","").split(".")[0];s({label:u,url:n,default:!1}),o("AI Prompt Engine added successfully")};return e.jsxs("div",{className:"settingRow",children:[e.jsx("p",{className:"settingTitle",children:"AI prompt Engine URL"}),e.jsxs("div",{className:"settingContent",children:[e.jsxs("div",{className:"form",children:[e.jsx("input",{type:"text",value:n||"",onChange:d=>l(d.target.value),placeholder:"https://chatgpt.com?q="}),e.jsx("div",{children:e.jsx(F,{startIcon:e.jsx(Ze,{}),size:"small",onClick:c,children:"Add"})})]}),t&&e.jsx("div",{className:"settingHint",children:e.jsx("p",{children:t})})]})]})},Ws=()=>{var c,d,u,j,h,p;const{promptEngines:s,promptEngine:r,removeSearchEngine:n,setPromptEngine:l}=T(),[t,o]=x.useState({showModal:!1,engine:void 0}),i=[...he,...s];return e.jsx(z,{title:"AI Prompt Engine",description:`
     Select from top AI models, input your prompt, and get quick responses. 
      You can also add a new ai model engine by providing its URL.
    `,children:e.jsxs(e.Fragment,{children:[e.jsx(Q,{showModal:t.showModal,title:`Confirm ${(c=t.engine)!=null&&c.isDefault?"removal":"deletion"} of engine: ${(d=t.engine)==null?void 0:d.label}`,description:`Are you sure you want to ${(u=t.engine)!=null&&u.isDefault?"remove":"delete"} the ${(j=t.engine)==null?void 0:j.label} engine? ${(h=t.engine)!=null&&h.isDefault?"You can add it back anytime.":"This action cannot be undone."}`,onClose:()=>o({showModal:!1,engine:void 0}),onConfirm:()=>{t.engine&&(n(t.engine.url),o({showModal:!1,engine:void 0}))}}),e.jsx(K,{canSelectMultiple:!1,options:i.map(v=>({label:v.label,value:v.url,removeable:!0,icon:(v==null?void 0:v.default)===!1?e.jsx(ts,{}):e.jsx("img",{className:"lang_icon",src:`/searchengine_logos/${v.label.toLowerCase()}_logo.svg`})})),defaultValues:[((p=i.find(v=>v.label===r))==null?void 0:p.url)||""],onRemove:v=>{const C=i.find(L=>L.url===v.value);C&&o({showModal:!0,engine:{label:C.label,url:C.url,isDefault:C.default===!0}})},onChange:v=>{const C=v.option;es(C.label),ss(C.label),l(C.label)}}),e.jsx("hr",{}),e.jsxs(e.Fragment,{children:[e.jsx("header",{children:e.jsxs("div",{className:"settingsHeader",children:[e.jsx("h3",{className:"title",children:"Add new AI prompt Engine"}),e.jsx("p",{className:"description",children:"Can't find your favorite AI prompt engine? Add it here and it."})]})}),e.jsx(Ts,{})]})]})})},ve=({isOpen:s,onClose:r,feed:n,existingCard:l})=>{const[t,o]=x.useState([]),[i,c]=x.useState({}),[d,u]=x.useState(!1),[j,h]=x.useState(null),{userCustomCards:p,setUserCustomCards:v,cards:C,setCards:L}=T();x.useEffect(()=>{s&&n.url&&I()},[s,n.url]),x.useEffect(()=>{if(l&&l.customContent&&t.length>0){const f={};t.forEach((g,w)=>{f[g.url]=w});const k={};l.customContent.forEach(g=>{const w=f[g.url];w!==void 0&&(k[w.toString()]=!0)}),c(k)}},[l,t]);const I=async()=>{u(!0),h(null);try{const f=await fetch(`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(n.url)}`);if(!f.ok)throw new Error(`Failed to fetch RSS feed: ${f.status} ${f.statusText}`);const k=await f.json();if(k.status!=="ok")throw new Error(`RSS feed error: ${k.message}`);const g=k.items.map((a,y)=>{let b="";return a.enclosure&&a.enclosure.link?b=a.enclosure.link:a.media&&a.media.content&&a.media.content.url?b=a.media.content.url:a.thumbnail&&(b=a.thumbnail),{id:`rss-${y}`,title:a.title,url:a.link,published_at:a.pubDate,description:a.description||a.contentSnippet||"",author:a.author,tags:a.categories||[],image:b}});o(g);const w={};if(l&&l.customContent){const a={};g.forEach((y,b)=>{a[y.url]=b}),l.customContent.forEach(y=>{const b=a[y.url];b!==void 0&&(w[b.toString()]=!0)})}else g.forEach((a,y)=>{w[y.toString()]=!0});c(w)}catch(f){h(`Failed to fetch RSS articles: ${f instanceof Error?f.message:"Unknown error"}`),console.error("Error fetching RSS articles:",f);const k=[{id:"sample-1",title:"Sample Article 1",url:"https://example.com/article1",published_at:new Date().toISOString(),description:"This is a sample article description",author:"Author 1",tags:["tech","programming"],image:""},{id:"sample-2",title:"Sample Article 2",url:"https://example.com/article2",published_at:new Date(Date.now()-864e5).toISOString(),description:"This is another sample article description",author:"Author 2",tags:["web","design"],image:""}];o(k);const g={};l&&l.customContent?g[0]=!0:k.forEach((w,a)=>{g[a.toString()]=!0}),c(g)}finally{u(!1)}},B=f=>{c(k=>({...k,[f]:!k[f]}))},U=()=>{try{const f=Object.entries(i).filter(([g,w])=>w).map(([g])=>t[parseInt(g)]);if(f.length===0){h("Please select at least one article");return}const k=f.map((g,w)=>({id:g.id,url:g.url,title:g.title,published_at:new Date(g.published_at).getTime(),tags:g.tags||[],reactions:0,comments:0,image_url:g.image||"",source:"custom"}));if(l){const g={...l,customContent:k,component:oe},w=p.map(a=>a.value===l.value?g:a);v(w),r(),alert(`Successfully updated custom card with ${f.length} article(s)!`)}else{const g={feedUrl:n.url,label:`${n.title} - Custom`,value:`custom-rss-${Date.now()}`,analyticsTag:`custom-rss-${Date.now()}`,link:n.url,type:"rss",icon:"ðŸ“°",customContent:k,component:oe};v([...p,g]);const w={id:C.length,name:g.value,type:"rss"};L([...C,w]),r(),alert(`Successfully created custom card with ${f.length} article(s)!`)}}catch(f){h("Error creating custom card. Please try again."),console.error("Error creating custom card:",f)}};return e.jsx(ne,{showModal:s,onClose:r,header:{title:l?"Edit RSS Content":"RSS Content Editor"},children:e.jsxs("div",{className:"rss-content-editor",children:[e.jsxs("div",{className:"feed-info",children:[e.jsx("h3",{children:n.title}),e.jsx("p",{children:n.url})]}),j&&e.jsx("div",{className:"error-message",children:j}),d?e.jsx("div",{className:"loading",children:"Loading articles..."}):e.jsxs("div",{className:"articles-list",children:[e.jsx("h4",{children:l?"Edit Articles for Custom Card":"Select Articles for Custom Card"}),e.jsx("div",{className:"articles-container",children:t.map((f,k)=>e.jsx("div",{className:`article-item ${i[k.toString()]?"selected":""}`,children:e.jsxs("div",{className:"article-header",children:[e.jsx("input",{type:"checkbox",checked:i[k.toString()]||!1,onChange:()=>B(k.toString())}),e.jsxs("div",{className:"article-info",children:[e.jsx("h5",{children:f.title}),e.jsx("p",{className:"article-url",children:f.url}),e.jsx("p",{className:"article-description",children:f.description}),f.author&&e.jsxs("p",{className:"article-author",children:["By ",f.author]}),f.tags&&e.jsx("div",{className:"article-tags",children:f.tags.map((g,w)=>e.jsx("span",{className:"tag",children:g},w))})]})]})},k))}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{onClick:U,disabled:Object.values(i).filter(Boolean).length===0,className:"create-card-button",children:l?"Update Card":"Create Custom Card"}),e.jsx("button",{onClick:r,className:"cancel-button",children:"Cancel"})]})]})]})})},Ls=async s=>{try{const n=(await ce.get(s,{headers:{"User-Agent":"Mozilla/5.0 (compatible; RSS Feed Detector/1.0)"}})).data,l=[],t=/<link[^>]*rel=["'](alternate|feed)["'][^>]*href=["']([^"']+)["'][^>]*type=["'](application\/rss\+xml|application\/atom\+xml|application\/rdf\+xml|application\/xml\+rss|text\/xml)[^>]*>/gi;let o;for(;(o=t.exec(n))!==null;){const[,,c,d]=o;if(c){const u=new URL(c,s).href,j=o[0].match(/title=["']([^"']+)["']/i),h=j?j[1]:`RSS Feed (${d})`;l.push({url:u,title:h,type:d})}}const i=["/rss","/rss.xml","/feed","/feed.xml","/atom.xml","/rssfeed","/rss/feed.xml"];for(const c of i)try{const d=new URL(c,s).href;l.some(u=>u.url===d)||l.push({url:d,title:`RSS Feed (${c})`,type:"application/rss+xml"})}catch{}return l}catch(r){return console.error("Error detecting RSS feeds:",r),[]}},Ms=async s=>{try{const n=(await ce.get(s,{headers:{"User-Agent":"Mozilla/5.0 (compatible; RSS Feed Validator/1.0)"}})).data;return n.includes("<rss")||n.includes("<feed")||n.includes("<rdf:RDF")||n.includes("<?xml")}catch(r){return console.error("Error validating RSS feed:",r),!1}},Us=({isOpen:s,onClose:r,urlToCheck:n})=>{const[l,t]=x.useState(n||""),[o,i]=x.useState(!1),[c,d]=x.useState([]),[u,j]=x.useState({}),[h,p]=x.useState({}),[v,C]=x.useState(null),[L,I]=x.useState(!1),[B,U]=x.useState(null),{userCustomCards:f,setUserCustomCards:k,cards:g,setCards:w}=T();x.useEffect(()=>{n&&(t(n),a(n))},[n]);const a=async m=>{if(!m){C("Please enter a URL");return}m.startsWith("http")||(m="https://"+m);try{i(!0),C(null),d([]),j({}),p({}),new URL(m);const D=await Ls(m);if(D.length===0){C("No RSS feeds found on this website");return}d(D);const R={};for(const N of D)try{const M=await Ms(N.url);R[N.url]=M}catch{R[N.url]=!1}j(R);const E={};D.forEach(N=>{E[N.url]=R[N.url]||!1}),p(E)}catch(D){D instanceof Error?C(`Error: ${D.message}`):C("An unknown error occurred")}finally{i(!1)}},y=async()=>{try{const m=c.filter(R=>h[R.url]);if(m.length===0){C("Please select at least one feed to add");return}i(!0);const D=[];for(const R of m)try{const E=await xe(R.url),N={feedUrl:R.url,label:E.title||R.title,value:E.title.toLowerCase().replace(/\s+/g,"-")||`rss-${Date.now()}`,analyticsTag:E.title.toLowerCase().replace(/\s+/g,"-")||`rss-${Date.now()}`,link:E.link||R.url,type:"rss",icon:E.icon||"ðŸ“°"};D.push(N),pe(N.value)}catch(E){console.error(`Error processing feed ${R.url}:`,E)}if(D.length>0){k([...f,...D]);const R=D.map((E,N)=>({id:g.length+N,name:E.value,type:"rss"}));w([...g,...R])}r(),alert(`Successfully added ${D.length} RSS feed(s)!`)}catch(m){C("Error adding RSS feeds. Please try again."),console.error("Error adding RSS feeds:",m)}finally{i(!1)}},b=m=>{p(D=>({...D,[m]:!D[m]}))},A=m=>{U(m),I(!0)};return e.jsxs(ne,{showModal:s,onClose:r,header:{title:"RSS Feed Finder"},children:[e.jsx("div",{className:"rss-finder-modal",children:e.jsxs("div",{className:"rss-finder-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"website-url",children:"Website URL"}),e.jsxs("div",{className:"input-group",children:[e.jsx("input",{id:"website-url",type:"text",value:l,onChange:m=>t(m.target.value),placeholder:"https://example.com",disabled:o}),e.jsx("button",{onClick:()=>a(l),disabled:o||!l,className:"detect-button",children:o?"Detecting...":"Find Feeds"})]})]}),v&&e.jsx("div",{className:"error-message",children:v}),c.length>0&&e.jsxs("div",{className:"feeds-list",children:[e.jsxs("h3",{children:["Found ",c.length," RSS Feed(s)"]}),e.jsx("div",{className:"feeds-container",children:c.map((m,D)=>e.jsxs("div",{className:`feed-item ${h[m.url]?"selected":""}`,children:[e.jsxs("div",{className:"feed-header",children:[e.jsx("input",{type:"checkbox",checked:h[m.url]||!1,onChange:()=>b(m.url),disabled:!u[m.url]}),e.jsxs("div",{className:"feed-info",children:[e.jsx("h4",{children:m.title}),e.jsx("p",{className:"feed-url",children:m.url})]})]}),e.jsxs("div",{className:"feed-status",children:[u[m.url]===!0&&e.jsx("span",{className:"status valid",children:"âœ“ Valid"}),u[m.url]===!1&&e.jsx("span",{className:"status invalid",children:"âœ— Invalid"}),u[m.url]===void 0&&e.jsx("span",{className:"status checking",children:"Checking..."}),e.jsx("button",{onClick:()=>A(m),className:"edit-content-button",disabled:!u[m.url],children:"Edit Content"})]})]},m.url))}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{onClick:y,disabled:o||Object.values(h).filter(Boolean).length===0,className:"add-feeds-button",children:o?"Adding...":"Add Selected Feed(s)"}),e.jsx("button",{onClick:r,className:"cancel-button",children:"Cancel"})]})]})]})}),e.jsx(ve,{isOpen:L,onClose:()=>I(!1),feed:B||{url:"",title:"",type:""}})]})},$s=()=>{const{cards:s,setCards:r,userCustomCards:n,setUserCustomCards:l}=T(),[t,o]=x.useState(),[i,c]=x.useState(),[d,u]=x.useState(!1),j=async()=>{if(!t){c("Please provide an RSS Feed URL");return}if(!je(t)){c("Invalid RSS Feed URL. Please check and try again");return}u(!0);try{const h=await xe(t);let p=h.title.toLowerCase();if(n.some(I=>I.link===h.link)){c("RSS Feed already exists");return}let v={feedUrl:t,label:h.title,value:p,analyticsTag:p,link:h.link,type:"rss",icon:h.icon};l([...n,v]);const C=[...s],L={id:Math.max(...C.map(I=>I.id),C.length-1)+1,name:v.value,type:v.type};r([...C,L]),ls([...C,L].map(I=>I.name)),pe(v.value),o(""),c("RSS Feed Added")}catch{c("Error occured. Please check and try again")}finally{u(!1)}};return e.jsxs("div",{className:"settingRow",children:[e.jsx("p",{className:"settingTitle",children:"RSS Feed URL"}),e.jsxs("div",{className:"settingContent",children:[e.jsxs("div",{className:"form",children:[e.jsx("input",{type:"text",value:t||"",onChange:h=>o(h.target.value),placeholder:"https://url.com/rss/feed"}),d?e.jsx(ns,{color:"#A9B2BD",loading:d,size:6}):e.jsx("div",{children:e.jsx(F,{startIcon:e.jsx(as,{}),size:"small",className:"rssButton",onClick:j,children:"Add"})})]}),i&&e.jsx("div",{className:"settingHint",children:e.jsx("p",{children:i})})]})]})},qs=()=>{var U,f,k,g,w;const{cards:s,setCards:r,userCustomCards:n,setUserCustomCards:l}=T(),[t,o]=x.useState({showModal:!1,option:void 0}),[i,c]=x.useState(!1),[d,u]=x.useState(!1),[j,h]=x.useState(null),p=x.useRef(null),v=x.useMemo(()=>[...se.map(a=>({label:a.label,value:a.value,icon:a.icon,removeable:!0})),...n.map(a=>({label:a.label,value:a.value,removeable:!0,icon:a.icon?e.jsx("img",{src:a.icon,alt:""}):void 0,actions:[{label:"Edit Content",onClick:()=>B(a)}]}))].sort((a,y)=>a.label>y.label?1:-1),[n]),C=()=>{const a={cards:s,userCustomCards:n,exportDate:new Date().toISOString(),version:"1.0"},y=JSON.stringify(a,null,2),b=`data:application/json;charset=utf-8,${encodeURIComponent(y)}`,A=`devare-sources-${new Date().toISOString().slice(0,10)}.json`,m=document.createElement("a");m.setAttribute("href",b),m.setAttribute("download",A),m.click()},L=()=>{var a;(a=p.current)==null||a.click()},I=a=>{var A;const y=(A=a.target.files)==null?void 0:A[0];if(!y)return;const b=new FileReader;b.onload=m=>{var D;try{const R=(D=m.target)==null?void 0:D.result,E=JSON.parse(R);if(!E.cards||!E.userCustomCards)throw new Error("Invalid file format");r(E.cards),l(E.userCustomCards),p.current&&(p.current.value=""),alert("Sources imported successfully!")}catch(R){console.error("Error importing sources:",R),alert("Error importing sources. Please check the file format.")}},b.readAsText(y)},B=a=>{h(a),u(!0)};return e.jsx(z,{title:"Sources",description:"Your feed will be tailored by following the sources you are interested in.",children:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"sources-actions",children:[e.jsx(F,{startIcon:e.jsx(ue,{}),onClick:L,children:"Import Sources"}),e.jsx(F,{startIcon:e.jsx(me,{}),onClick:C,children:"Export Sources"}),e.jsx(F,{onClick:()=>c(!0),children:"Find RSS Feeds"}),e.jsx("input",{type:"file",ref:p,onChange:I,accept:".json",style:{display:"none"}})]}),e.jsx(Us,{isOpen:i,onClose:()=>c(!1)}),e.jsx(ve,{isOpen:d,onClose:()=>u(!1),feed:j?{url:j.feedUrl||"",title:j.label,type:"rss"}:{url:"",title:"",type:""},existingCard:j||void 0}),e.jsx(Q,{showModal:t.showModal,title:`Confirm ${(U=t.option)!=null&&U.isCustom?"delete":"remove"} source: ${(f=t.option)==null?void 0:f.label}`,description:`Are you sure you want to ${(k=t.option)!=null&&k.isCustom?"delete":"remove"} ${(g=t.option)==null?void 0:g.label} source? ${(w=t.option)!=null&&w.isCustom?"This action cannot be undone.":"You can add it back anytime."}`,onClose:()=>o({showModal:!1,option:void 0}),onConfirm:()=>{if(t.option){if(t.option.isCustom){const a=n.filter(b=>{var A;return b.value!==((A=t.option)==null?void 0:A.value)}),y=s.filter(b=>{var A;return b.name!==((A=t.option)==null?void 0:A.value)});r(y),l(a)}else{const a=s.filter(y=>{var b;return y.name!==((b=t.option)==null?void 0:b.value)});r(a)}o({showModal:!1,option:void 0})}}}),e.jsx(K,{canSelectMultiple:!0,options:v,defaultValues:s.map(a=>a.name),onRemove:a=>{o({showModal:!0,option:{...a,isCustom:n.some(y=>y.value===a.value)}})},onChange:(a,y)=>{const b=y.map(N=>N.value),A=new Map(s.map(N=>[N.name,N])),m=new Set(b),D=s.filter(N=>m.has(N.name)),R=b.filter(N=>!A.has(N)).map((N,M)=>se.find(P=>P.value===N)?{id:s.length+M,name:N,type:"supported"}:n.find(P=>P.value===N)?{id:s.length+M,name:N,type:"rss"}:null).filter(Boolean),E=[...D,...R];r(E),a.action=="ADD"?rs(a.option.value):os(a.option.value)}}),e.jsx("hr",{}),e.jsxs(e.Fragment,{children:[e.jsx("header",{children:e.jsxs("div",{className:"settingsHeader",children:[e.jsx("h3",{className:"title",children:"Add new Source"}),e.jsx("p",{className:"description",children:"Can't find your favorite source? Add its RSS feed URL here and it will be available in your feed."})]})}),e.jsx($s,{})]})]})})},Ks=()=>{const{userSelectedTags:s,setTags:r}=T(),{supportedTags:n}=is(),l=n.map(t=>({label:t.label,value:t.value})).sort((t,o)=>t.label>o.label?1:-1);return e.jsx(z,{title:"Topics",description:"Your feed will be tailored by following the technologies you are interested in.",children:e.jsx(K,{canSelectMultiple:!0,options:l,defaultValues:s.map(t=>t.value),onChange:(t,o)=>{const i=o.map(c=>n.find(d=>d.value===c.value)).filter(Boolean)||[];r(i),t.action=="ADD"?cs(t.option.value):ds(t.option.value)}})})};export{js as BookmarkItem,Ys as BookmarkSettings,Js as GeneralSettings,Ws as SearchEngineSettings,qs as SourceSettings,Ks as TopicSettings};
//# sourceMappingURL=index-oHHGBus4.js.map
