import{k as l,R as W,r as f,g as $}from"./core-Dpo8Q2SY.js";import{A as c,s as G,v as P,z as X,K as Z,P as Y,c as N,D as J,w as ee,B as te,q as se,C as re}from"./ui-CRwGqcgo.js";import{u as D,h as I,Z as ne,aO as _,aP as oe,a2 as ae,aQ as ie,aR as ce}from"./index-CcP7eB5b.js";import"./utils-B4k-6dfN.js";import{a as le,b as ue,C as H}from"./index-DB43KaUK.js";import"./CardIcon-DLOjbbbt.js";try{let e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="bde62759-fdae-41c8-a4f2-1b79f55e09ec",e._sentryDebugIdIdentifier="sentry-dbid-bde62759-fdae-41c8-a4f2-1b79f55e09ec")}catch{}const de=({selectedCard:e,setSelectedCard:t})=>{const{cards:s,userCustomCards:o}=D(),a=[...I,...o];return l.jsx("div",{className:"bottomNavigation",children:s.map(r=>{const i=a.find(x=>x.value===r.name);return l.jsx("button",{className:"navigationItem "+(e&&e.name===r.name?"active":""),onClick:()=>t(r),children:W.isValidElement(i==null?void 0:i.icon)?i.icon:typeof(i==null?void 0:i.icon)=="string"?l.jsx("img",{src:i.icon,alt:""}):l.jsx(ne,{className:"rss"})},r.name)})})},me=()=>{const{cards:e}=D(),[t,s]=f.useState(!1),[o,a]=f.useState(!1),r=f.useRef(null),i="Cards",x=u=>{const n=u.target;if(n.classList.contains(i))if(e.length<=_)s(!1),a(!1);else{const{scrollLeft:m,scrollWidth:g,offsetWidth:E}=n;s(m>100);const d=g-E-Math.abs(m);a(d>100)}},h=f.useCallback(u=>{u.key==="ArrowLeft"?w("left"):u.key==="ArrowRight"&&w("right")},[]);f.useLayoutEffect(()=>{r.current=document.querySelector(`.${i}`)},[]),f.useEffect(()=>{var u;return(u=r.current)==null||u.addEventListener("scroll",x,!0),window.addEventListener("keydown",h),()=>{var n;window.removeEventListener("keydown",h),(n=r.current)==null||n.removeEventListener("scroll",x)}},[h]),f.useEffect(()=>{a(e.length>_)},[e]);const w=u=>{var E,d;if(!r.current)return;oe(u);const{scrollLeft:n}=r.current,{offsetWidth:m}=(d=(E=r.current)==null?void 0:E.firstChild)==null?void 0:d.firstChild,g=u==="left"?n-m:n+m;r.current.scrollTo({left:g,behavior:"smooth"})};return l.jsxs("div",{className:"scrollCardsNavigator",children:[t&&l.jsx("button",{"aria-label":"Previous cards",className:"scrollButton",onClick:()=>w("left"),style:{left:0},children:l.jsx(le,{size:32})}),o&&l.jsx("button",{"aria-label":"Next cards",className:"scrollButton",onClick:()=>w("right"),style:{right:0},children:l.jsx(ue,{size:32})})]})};var L={},q;function fe(){if(q)return L;q=1,L.match=r,L.parse=i;var e=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,t=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,s=/^(?:(min|max)-)?(.+)/,o=/(em|rem|px|cm|mm|in|pt|pc)?$/,a=/(dpi|dpcm|dppx)?$/;function r(u,n){return i(u).some(function(m){var g=m.inverse,E=m.type==="all"||n.type===m.type;if(E&&g||!(E||g))return!1;var d=m.expressions.every(function(p){var y=p.feature,M=p.modifier,v=p.value,b=n[y];if(!b)return!1;switch(y){case"orientation":case"scan":return b.toLowerCase()===v.toLowerCase();case"width":case"height":case"device-width":case"device-height":v=w(v),b=w(b);break;case"resolution":v=h(v),b=h(b);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":v=x(v),b=x(b);break;case"grid":case"color":case"color-index":case"monochrome":v=parseInt(v,10)||1,b=parseInt(b,10)||0;break}switch(M){case"min":return b>=v;case"max":return b<=v;default:return b===v}});return d&&!g||!d&&g})}function i(u){return u.split(",").map(function(n){n=n.trim();var m=n.match(e),g=m[1],E=m[2],d=m[3]||"",p={};return p.inverse=!!g&&g.toLowerCase()==="not",p.type=E?E.toLowerCase():"all",d=d.match(/\([^\)]+\)/g)||[],p.expressions=d.map(function(y){var M=y.match(t),v=M[1].toLowerCase().match(s);return{modifier:v[1],feature:v[2],value:M[2]}}),p})}function x(u){var n=Number(u),m;return n||(m=u.match(/^(\d+)\s*\/\s*(\d+)$/),n=m[1]/m[2]),n}function h(u){var n=parseFloat(u),m=String(u).match(a)[1];switch(m){case"dpcm":return n/2.54;case"dppx":return n*96;default:return n}}function w(u){var n=parseFloat(u),m=String(u).match(o)[1];switch(m){case"em":return n*16;case"rem":return n*16;case"cm":return n*96/2.54;case"mm":return n*96/2.54/10;case"in":return n*96;case"pt":return n*72;case"pc":return n*72/12;default:return n}}return L}var k,B;function he(){if(B)return k;B=1;var e=fe().match,t=typeof window<"u"?window.matchMedia:null;function s(a,r,i){var x=this,h;t&&!i&&(h=t.call(window,a)),h?(this.matches=h.matches,this.media=h.media,h.addListener(n)):(this.matches=e(a,r),this.media=a),this.addListener=w,this.removeListener=u,this.dispose=m;function w(g){h&&h.addListener(g)}function u(g){h&&h.removeListener(g)}function n(g){x.matches=g.matches,x.media=g.media}function m(){h&&h.removeListener(n)}}function o(a,r,i){return new s(a,r,i)}return k=o,k}var pe=he();const ge=$(pe);var ve=/[A-Z]/g,ye=/^ms-/,j={};function xe(e){return"-"+e.toLowerCase()}function K(e){if(j.hasOwnProperty(e))return j[e];var t=e.replace(ve,xe);return j[e]=ye.test(t)?"-"+t:t}function be(e,t){if(e===t)return!0;if(!e||!t)return!1;const s=Object.keys(e),o=Object.keys(t),a=s.length;if(o.length!==a)return!1;for(let r=0;r<a;r++){const i=s[r];if(e[i]!==t[i]||!Object.prototype.hasOwnProperty.call(t,i))return!1}return!0}const C=c.oneOfType([c.string,c.number]),Q={all:c.bool,grid:c.bool,aural:c.bool,braille:c.bool,handheld:c.bool,print:c.bool,projection:c.bool,screen:c.bool,tty:c.bool,tv:c.bool,embossed:c.bool},Ce={orientation:c.oneOf(["portrait","landscape"]),scan:c.oneOf(["progressive","interlace"]),aspectRatio:c.string,deviceAspectRatio:c.string,height:C,deviceHeight:C,width:C,deviceWidth:C,color:c.bool,colorIndex:c.bool,monochrome:c.bool,resolution:C,type:Object.keys(Q)},{type:Ve,...we}=Ce,Ee={minAspectRatio:c.string,maxAspectRatio:c.string,minDeviceAspectRatio:c.string,maxDeviceAspectRatio:c.string,minHeight:C,maxHeight:C,minDeviceHeight:C,maxDeviceHeight:C,minWidth:C,maxWidth:C,minDeviceWidth:C,maxDeviceWidth:C,minColor:c.number,maxColor:c.number,minColorIndex:c.number,maxColorIndex:c.number,minMonochrome:c.number,maxMonochrome:c.number,minResolution:C,maxResolution:C,...we},Me={...Q,...Ee};var Se={all:Me};const De=e=>`not ${e}`,Le=(e,t)=>{const s=K(e);return typeof t=="number"&&(t=`${t}px`),t===!0?s:t===!1?De(s):`(${s}: ${t})`},Re=e=>e.join(" and "),ke=e=>{const t=[];return Object.keys(Se.all).forEach(s=>{const o=e[s];o!=null&&t.push(Le(s,o))}),Re(t)},je=f.createContext(void 0),Ne=e=>e.query||ke(e),T=e=>e?Object.keys(e).reduce((s,o)=>(s[K(o)]=e[o],s),{}):void 0,U=()=>{const e=f.useRef(!1);return f.useEffect(()=>{e.current=!0},[]),e.current},Ie=e=>{const t=f.useContext(je),s=()=>T(e)||T(t),[o,a]=f.useState(s);return f.useEffect(()=>{const r=s();be(o,r)||a(r)},[e,t]),o},Oe=e=>{const t=()=>Ne(e),[s,o]=f.useState(t);return f.useEffect(()=>{const a=t();s!==a&&o(a)},[e]),s},Ae=(e,t)=>{const s=()=>ge(e,t||{},!!t),[o,a]=f.useState(s),r=U();return f.useEffect(()=>{if(r){const i=s();return a(i),()=>{i&&i.dispose()}}},[e,t]),o},ze=e=>{const[t,s]=f.useState(e.matches);return f.useEffect(()=>{const o=a=>{s(a.matches)};return e.addListener(o),s(e.matches),()=>{e.removeListener(o)}},[e]),t},V=(e,t,s)=>{const o=Ie(t),a=Oe(e);if(!a)throw new Error("Invalid or missing MediaQuery!");const r=Ae(a,o),i=ze(r);return U(),f.useEffect(()=>{},[i]),f.useEffect(()=>()=>{r&&r.dispose()},[]),i},F=({children:e})=>V({minWidth:768})?e:null,Pe=({children:e})=>V({maxWidth:767})?e:null,_e=({id:e,card:t})=>{const{attributes:s,listeners:o,setNodeRef:a,isDragging:r,transform:i,transition:x}=se({id:e}),{isOrganizeMode:h}=D(),w={transform:re.Transform.toString(i),transition:x},u=t.component||H;return l.jsx("div",{ref:a,style:w,className:N(h&&"grid-item"),children:l.jsx(u,{meta:t,className:N(r&&"draggedBlock",h&&"organize-item"),knob:l.jsx(F,{children:l.jsx("button",{className:"blockHeaderDragButton",...s,...o,children:l.jsx(ce,{})})})})})},qe=({cards:e,userCustomCards:t})=>{const s=[...I,...t],{updateCardOrder:o,isOrganizeMode:a,setIsOrganizeMode:r,setCards:i}=D(),x=f.useRef(null),{adsConfig:h}=ae(),w=G(P(Y),P(Z,{coordinateGetter:X})),u=()=>{var d;(d=x.current)==null||d.classList.add("snapDisabled")},n=d=>{var M;const{active:p,over:y}=d;if(p.id!==(y==null?void 0:y.id)){const v=e.findIndex(S=>S.name===p.id),b=e.findIndex(S=>S.name===(y==null?void 0:y.id));v!==-1&&b!==-1&&(o(v,b),ie())}(M=x.current)==null||M.classList.remove("snapDisabled")},m=d=>{if(!x.current)return;const p=x.current,{clientX:y}=d,{left:M,right:v,width:b}=p.getBoundingClientRect(),S=b*.1,O=M+S,A=v-S,z=10;if(y<O){const R=(O-y)/S;p.scrollBy({left:-z*R,behavior:"smooth"})}else if(y>A){const R=(y-A)/S;p.scrollBy({left:z*R,behavior:"smooth"})}},g=f.useMemo(()=>e.map(d=>{const p=s.find(y=>y.value===d.name);return p?{card:p,id:d.name}:null}).filter(Boolean),[e]);f.useEffect(()=>{const d=p=>{p.key==="Escape"&&a&&(r(!1),document.documentElement.classList.remove("organizeMode"))};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[a,r]);const E=()=>{r(!1),document.documentElement.classList.remove("organizeMode")};return l.jsxs("div",{ref:x,className:N("Cards","HorizontalScroll",a&&"grid-layout"),children:[a&&l.jsxs("div",{className:"organize-mode-header",children:[l.jsx("h2",{children:"Organize Cards"}),l.jsx("p",{children:"Drag and drop cards to reorder them. Press ESC to exit."}),l.jsx("button",{className:"exit-organize-mode",onClick:E,children:"Exit Organize Mode"})]}),l.jsx(J,{sensors:w,autoScroll:!0,onDragEnd:n,onDragStart:u,onDragMove:m,children:l.jsx(ee,{items:g.map(({id:d})=>d),strategy:te,children:g.map(({id:d,card:p},y)=>l.jsx(_e,{id:d,card:p},d))})})]})},Be=({selectedCard:e})=>{const{userCustomCards:t}=D(),s=[...I,...t].find(o=>o.value===e.name);return s?W.createElement((s==null?void 0:s.component)||H,{key:s.value,meta:s}):null},Fe=()=>{const{cards:e,userCustomCards:t}=D(),[s,o]=f.useState(e[0]);return l.jsxs(l.Fragment,{children:[l.jsx(me,{}),l.jsx(F,{children:l.jsx(qe,{cards:e,userCustomCards:t})}),l.jsx(Pe,{children:l.jsx("div",{className:"Cards HorizontalScroll",children:l.jsx(Be,{selectedCard:s})})}),l.jsx(de,{selectedCard:s,setSelectedCard:o})]})};export{Fe as CardsLayout};
//# sourceMappingURL=CardsLayout-zNPIR-JQ.js.map
